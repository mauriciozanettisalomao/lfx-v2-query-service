# Copyright The Linux Foundation and each contributor to LFX.
# SPDX-License-Identifier: MIT
---
replicaCount: 1

# Override from CLI/CI: --set image.tag=<git-sha>, etc.
image:
  repository: ghcr.io/linuxfoundation/lfx-v2-query-service/cmd
  tag: ""
  pullPolicy: IfNotPresent

# app is the configuration for the application
app:
  # logLevel is the log level (debug, info, warn, error)
  logLevel: debug
  # logAddSource is a boolean to determine if the log source should be added
  logAddSource: true
  # audience is the JWT audience required for this authentication with this app
  audience: http://lfx-api.k8s.orb.local

# ingress is the configuration for the ingress routing
ingress:
  hostname: lfx-api.k8s.orb.local

# nats is the configuration for the NATS server
nats:
  # url is the URL of the NATS server
  url: nats://lfx-platform-nats.lfx.svc.cluster.local:4222

# opensearch is the configuration for the OpenSearch cluster
opensearch:
  # url is the URL of the OpenSearch cluster
  url: http://opensearch-cluster-master:9200

authelia:
  # enabled is a boolean to determine if the Authelia authenticator is enabled
  # Note: Disabling Authelia should only be used for local development
  enabled: true

# heimdall is the configuration for the heimdall middleware
heimdall:
  # enabled is a boolean to determine if the heimdall middleware is enabled
  # If disabled, there will be no authorization check on the query routes
  enabled: true
  url: http://lfx-platform-heimdall.lfx.svc.cluster.local:4456
  # jwksUrl is the JWKS URL for JWT verification (note: uses port 4457)
  jwksUrl: http://lfx-platform-heimdall.lfx.svc.cluster.local:4457/.well-known/jwks

# secret is the configuration for the Kubernetes Secret
secret:
  # name is the name of the secret
  name: lfx-v2-query-service-secrets
  # pageTokenSecret is the secret used for page token encryption
  # If not provided, a random 32-character secret will be generated
  # pageTokenSecret: "your-custom-secret-here"
